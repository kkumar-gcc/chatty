<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
      integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/3.0.0/mustache.min.js
"></script>
    <link rel="stylesheet" href="/home.css" />
  </head>
  <body>
    <div class="main-container clearfix">
      <div class="chat-list">
        <div class="user-container">
          <img
            src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/chat_avatar_01_green.jpg"
            alt="avatar"
          />
          <div class="user-about">
            <div class="user-name"><%= user.name%></div>
            <div class="status"><i class="fa fa-circle online"></i> online</div>
          </div>
          <div class="setting">
            <div class="dropdown">
              <i
                class="fa-solid fa-ellipsis-vertical options"
                class="dropdown-toggle"
                type="button"
                id="dropdownMenu2"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              ></i>
              <div
                class="dropdown-menu dropdown-menu-right"
                aria-labelledby="dropdownMenu2"
              >
                <!-- <h6 class="dropdown-header">Dropdown header</h6> -->
                <a class="dropdown-item" href="/chat">Start chat</a>
                <a class="dropdown-item" href="/profile">setting</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="/logout">logout</a>
              </div>
            </div>
          </div>
        </div>

        <div class="people-list" id="people-list">
          <div class="search">
            <input type="text" placeholder="search" />
            <i class="fa fa-search"></i>
          </div>
          <ul class="list">
            <% for(var i=0; i < users.length; i++) { %>

            <li class="clearfix">
              <img
                src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/chat_avatar_01.jpg"
                alt="avatar"
              />
              <div class="about">
                <div class="name">
                  <a href="/chat/<%=users[i]._id%>-<%=user._id%>"
                    ><%= users[i].name %></a
                  >
                </div>
                <div class="status">
                  <i class="fa fa-circle online"></i> online
                </div>
              </div>
            </li>
            <%}%>
          </ul>
        </div>
      </div>

      <div class="chat">
        <div class="chat-header clearfix">
          <img
            src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/chat_avatar_01_green.jpg"
            alt="avatar"
          />
          <div class="chat-about">
            <div class="chat-with" id="receiver_name"></div>
            <div class="status"><i class="fa fa-circle online"></i> online</div>
          </div>
          <i class="fa-solid fa-ellipsis-vertical options"></i>
        </div>
        <!-- end chat-header -->

        <div class="chat-history">
          <ul id="messages">
            <!-- <li class="clearfix">
              <div class="message-data align-right">
                <span class="message-data-time">10:10 AM, Today</span> &nbsp;
                &nbsp; <span class="message-data-name">Olia</span>
                <i class="fa fa-circle me"></i>
              </div>
              <div class="message other-message float-right">
                Hi Vincent, how are you? How is the project coming along?
              </div>
            </li> -->

            <!-- <li>
              <div class="message-data">
                <span class="message-data-name"
                  ><i class="fa fa-circle online"></i> Vincent</span
                >
                <span class="message-data-time">10:12 AM, Today</span>
              </div>
              <div class="message my-message">
                Are we meeting today? Project has been already finished and I
                have results to show you.
              </div>
            </li> -->
           
           
          </ul>
           <script id="message-template" type="text/template">
                <li class="clearfix">
                    <div class="message-data align-right">
                      <span class="message-data-time">10:10 AM, Today</span> &nbsp;
                      &nbsp; <span class="message-data-name">{{ sender }}</span>
                      <i class="fa fa-circle me"></i>
                    </div>
                    <div class="message other-message float-right">
                     {{ text }}
                    </div>
                  </li>
            </script>
        </div>
        <!-- end chat-history -->

        <div class="chat-message clearfix">
          <form id="message_form" method="post">
            <textarea
              name="message"
              id="message"
              placeholder="Type your message"
              rows="3"
            ></textarea>
            <input type="hidden" name="username" id="user_name" value="<%= user.name %>">
            <button type="submit" id="send_message">
              <i class="fa-solid fa-paper-plane"></i>
            </button>
          </form>
        </div>
      </div>
      <!-- end chat -->
    </div>

    <!-- end container -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.socket.io/4.4.1/socket.io.min.js" integrity="sha384-fKnu0iswBIqkjxrhQCTZ7qlLHOFEgNkRmK2vaO/LbTZSXdJfAu6ewRBdwHPhBo/H" crossorigin="anonymous"></script>
    <script src="/deparam.js"></script>
    <script src="/privatechat.js"></script>
    
  </body>
</html>
